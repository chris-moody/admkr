/*!
 * VERSION: 1.1.1
 * DATE: 2018-03-03
 * UPDATES AND DOCS AT: https://chris-moody.github.io/mkr
 *
 * @license copyright 2017-2018 Christopher C. Moody
 *
 *  Permission is hereby granted, free of charge, to any person obtaining a copy of
 *  this software and associated documentation files (the "Software"), to deal in the
 *  Software without restriction, including without limitation the rights to use, copy,
 *  modify, merge, publish, distribute, sublicense, and/or sell copies of the Software,
 *  and to permit persons to whom the Software is furnished to do so, subject to the
 *  following conditions:
 *
 *  The above copyright notice and this permission notice shall be included in all
 *  copies or substantial portions of the Software.
 *
 *  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,
 *  INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
 *  PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 *  HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 *  OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
 *  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 * @author: Christopher C. Moody, chris@moodydigital.com
 */
!function(global,className){var _instances={},_count=-1,arc=function(options){options=options||{},_count++;var id=this._id=options.id||"arc-"+_count;this._parent=mkr.setDefault(options,"parent",mkr.default(mkr.query("svg"),mkr.create("svg",{css:{overflow:"visible"}})));var p="string"==typeof this._parent?mkr.query(this._parent):this._parent;p instanceof SVGElement||(this._parent=mkr.query("svg",p)||mkr.create("svg",{css:{overflow:"visible"}},this._parent)),mkr.setDefault(options,"attr",{}),mkr.setDefault(options.attr,"id",id),mkr.setDefault(options,"css",{}),mkr.setDefault(options,"fill","transparent"),mkr.setDefault(options,"stroke","#000000"),mkr.setDefault(options,"strokeWidth",1),mkr.setDefault(options.attr,"class","arc-path"),mkr.setDefault(options.attr,"fill",options.fill),mkr.setDefault(options.attr,"stroke",options.stroke),mkr.setDefault(options.attr,"stroke-width",options.strokeWidth);var r=options.r;void 0!==r?this._rx=this._ry=r:(this._rx=mkr.default(options.rx,50),this._ry=mkr.default(options.ry,50)),this._start=mkr.default(options.start,0),this._length=arc.flatten(mkr.default(options.length,0)),this._end=this._start+this._length,this._cx=mkr.default(options.cx,this._rx),this._cy=mkr.default(options.cy,this._ry),this._rotation=mkr.default(options.rotation,0),this._sweepFlag=mkr.default(options.sweepFlag,0),mkr.setDefault(options.attr,"d",this.calculatedPath),this._path=mkr.create("path",{attr:options.attr,css:options.css},this._parent),_instances[id]=this};arc.prototype={get el(){return this._path},get id(){return this.el.id},get parent(){return this.el.parentNode},get fill(){return this.el.getAttribute("fill")},set fill(value){this.el.setAttribute("fill",value)},get stroke(){return this.el.getAttribute("stroke")},set stroke(value){this.el.setAttribute("stroke",value)},get strokeWidth(){return this.el.getAttribute("stroke-width")},set strokeWidth(value){this.el.setAttribute("stroke-width",value)},get dasharray(){return window.getComputedStyle(this.el).getPropertyValue("stroke-dasharray")},set dasharray(value){TweenMax.set(this.el,{css:{strokeDasharray:value}})},get dashoffset(){return window.getComputedStyle(this.el).getPropertyValue("stroke-dashoffset")},set dashoffset(value){TweenMax.set(this.el,{css:{strokeDashoffset:value}})},get slice(){var offset,da,da0;if(offset=mkr.unitless(String(this.dashoffset).trim()),da=this.dasharray.split(","),da0=mkr.unitless(String(da[0]).trim()),0===offset&&isNaN(da0))return"0 100%";mkr.unitless(String(da[1]).trim());var start,end,len=this.el.getTotalLength();return offset<0?end=da0+(start=-offset):(start=0,end=Math.abs(da0-offset)),this._startUnit&&(start=100*mkr.fix(start/len)+"%"),this._endUnit&&(end=100*mkr.fix(end/len)+"%"),start+" "+end},set slice(value){var args=value.split(" ");if(0!=args.length){var start,end;1==args.length?(start=0,end=args[0]):(start=args[0],end=args[1]);var offset,da0,da1,p0,p1,len=this.el.getTotalLength();if("string"==typeof start){var n=start.indexOf("%");n>=0?(start=mkr.fix(len*(mkr.unitless(start)/100)),this._startUnit=!0):this._startUnit=!1}"string"==typeof end&&((n=end.indexOf("%"))>=0?(end=mkr.fix(len*(mkr.unitless(end)/100)),this._endUnit=!0):this._endUnit=!1),p0=Math.min(start,end),p1=Math.max(start,end),0==p0?(da0=len+1,offset=p1>=len?0:da0-p1):(da0=Math.abs(p1-p0),offset=-p0),da1=len+11,TweenMax.set(this,{dashoffset:offset,dasharray:da0+"px,"+da1+"px"})}},get cx(){return this._cx},set cx(value){this._cx=value,this.update()},get cy(){return this._cy},set cy(value){this._cy=value,this.update()},get r(){return this._rx},set r(value){this._rx=this._ry=value,this.update()},get rx(){return this._rx},set rx(value){this._rx=value,this.update()},get ry(){return this._ry},set ry(value){this._ry=value,this.update()},get end(){return this._start+this._length},set end(value){this._end=value,this.length=value-this._start},get start(){return this._start},set start(value){this._start=value,this.update()},get length(){return this._length},set length(value){this._length=value,this.update()},get rotation(){return this._rotation},set rotation(value){this._rotation=value,this.update()},get largeArcFlag(){return this._largeArcFlag},get sweepFlag(){return this._sweepFlag},set sweepFlag(value){this._sweepFlag=value,this.update()},get calculatedPath(){return arc.calculatePath(this.cx,this.cy,this.rx,this.ry,this.start,this.length,this.sweepFlag)},calculatePath:function(cx,cy,rx,ry,start,length,sweepFlag){return arc.calculatePath(cx,cy,rx,ry,start,length,sweepFlag)},update:function(draw){mkr.default(draw,!0)&&this.draw()},draw:function(){TweenMax.set(this._path,{attr:{d:this.calculatedPath}})}},arc.calculatePath=function(cx,cy,rx,ry,start,length,sweepFlag){(length=arc.flatten(length))<0&&(length+=360);var rad1=(start+length-90)*mkr.RAD,rad2=(start-90)*mkr.RAD,x1=cx+rx*Math.cos(rad1),y1=cy+ry*Math.sin(rad1),x2=cx+rx*Math.cos(rad2),y2=cy+ry*Math.sin(rad2);return["M",x1,y1,"A",rx,ry,0,length<=180?0:1,sweepFlag=mkr.default(sweepFlag,0),x2,y2].join(" ")},arc.flatten=function(value){return value%360==0&&0!=value&&(value+=value/Math.abs(value)*359.999),value%360},arc.getInstance=function(id){return _instances[id]},arc.getElInstance=function(el){return _instances[el.id]},Object.defineProperty(arc,"VERSION",{get:function(){return"1.1.1"}}),"function"==typeof define&&define.amd?define(function(){return arc}):"undefined"!=typeof module&&module.exports?module.exports=arc:global.arc=arc}(mkr._constructs);