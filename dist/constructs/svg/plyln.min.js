/*!
 * VERSION: 0.0.3
 * DATE: 2018-03-03
 * UPDATES AND DOCS AT: https://chris-moody.github.io/mkr
 *
 * @license copyright 2017-2018 Christopher C. Moody
 *
 *  Permission is hereby granted, free of charge, to any person obtaining a copy of
 *  this software and associated documentation files (the "Software"), to deal in the
 *  Software without restriction, including without limitation the rights to use, copy,
 *  modify, merge, publish, distribute, sublicense, and/or sell copies of the Software,
 *  and to permit persons to whom the Software is furnished to do so, subject to the
 *  following conditions:
 *
 *  The above copyright notice and this permission notice shall be included in all
 *  copies or substantial portions of the Software.
 *
 *  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,
 *  INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
 *  PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 *  HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 *  OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
 *  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 * @author: Christopher C. Moody, chris@moodydigital.com
 */
!function(global){function plyln(options){_count++;var id=this._id=(options=options||{}).id||"plyln-"+_count;this._parent=mkr.setDefault(options,"parent",mkr.default(mkr.query("svg"),mkr.create("svg",{css:{overflow:"visible"}})));var p="string"==typeof this._parent?mkr.query(this._parent):this._parent;p instanceof SVGElement||(this._parent=mkr.query("svg",p)||mkr.create("svg",{css:{overflow:"visible"}},this._parent)),mkr.setDefault(options,"attr",{}),mkr.setDefault(options.attr,"id",id),mkr.setDefault(options,"css",{}),mkr.setDefault(options,"fill","transparent"),mkr.setDefault(options,"stroke","#000000"),mkr.setDefault(options,"strokeWidth",1),mkr.setDefault(options.attr,"fill",options.fill),mkr.setDefault(options.attr,"stroke",options.stroke),mkr.setDefault(options.attr,"stroke-width",options.strokeWidth),this._x=mkr.default(options.x,0),this._y=mkr.default(options.y,0),this._points=mkr.default(options.points,[]),this._poly=mkr.create("polyline",{attr:options.attr,css:options.css},this._parent),this.update(),_instances[id]=this}var _instances={},_count=-1;plyln.prototype={get el(){return this._poly},get id(){return this.el.id},get parent(){return this.el.parentNode},get fill(){return this.el.getAttribute("fill")},set fill(value){this.el.setAttribute("fill",value)},get stroke(){return this.el.getAttribute("stroke")},set stroke(value){this.el.setAttribute("stroke",value)},get strokeWidth(){return this.el.getAttribute("stroke-width")},set strokeWidth(value){this.el.setAttribute("stroke-width",value)},get dasharray(){return window.getComputedStyle(this.el).getPropertyValue("stroke-dasharray")},set dasharray(value){TweenMax.set(this.el,{css:{strokeDasharray:value}})},get dashoffset(){return window.getComputedStyle(this.el).getPropertyValue("stroke-dashoffset")},set dashoffset(value){TweenMax.set(this.el,{css:{strokeDashoffset:value}})},get slice(){var end=mkr.unitless(String(this.dashoffset).trim()),len=this.dasharray.split(","),da0=mkr.unitless(String(len[0]).trim());if(0===end&&isNaN(da0))return"0 100%";mkr.unitless(String(len[1]).trim());var start,len=this.el.getTotalLength(),end=end<0?da0+(start=-end):(start=0,Math.abs(da0-end));return(start=this._startUnit?100*mkr.fix(start/len)+"%":start)+" "+(end=this._endUnit?100*mkr.fix(end/len)+"%":end)},set slice(len){var start,da0,p1,offset=len.split(" ");0!=offset.length&&(p1=1==offset.length?offset[start=0]:(start=offset[0],offset[1]),len=this.el.getTotalLength(),"string"==typeof start&&(0<=start.indexOf("%")?(start=mkr.fix(len*(mkr.unitless(start)/100)),this._startUnit=!0):this._startUnit=!1),"string"==typeof p1&&(0<=p1.indexOf("%")?(p1=mkr.fix(len*(mkr.unitless(p1)/100)),this._endUnit=!0):this._endUnit=!1),offset=Math.min(start,p1),p1=Math.max(start,p1),offset=0==offset?(da0=len+1,len<=p1?0:da0-p1):(da0=Math.abs(p1-offset),-offset),TweenMax.set(this,{dashoffset:offset,dasharray:da0+"px,"+(len+11)+"px"}))},get x(){return this._x},set x(value){this._x=value,this.update()},get y(){return this._y},set y(value){this._y=value,this.update()},get points(){return this._points},set points(value){this._points=value,this.update()},addPoint:function(coords,index){return index=mkr.default(index,this._points.length),this._points.splice(index,0,coords),this.update(),this},removePoint:function(removed){removed=mkr.default(removed,-1);removed=this._points.splice(removed,1);return this.update(),removed[0]},getPoint:function(index){return(index=mkr.default(index,-1))<0&&(index=this._points.length+index),this._points[index]},setPoint:function(coords,index){return(index=mkr.default(index,-1))<0&&(index=this._points.length+index),this._points[index]=coords,this.update(),this._points[index]},update:function(){for(var points=this._points,len=points.length,newPts="",i=0;i<len;i++){var xy=points[i];newPts+=(0<i?", ":"")+(Number(xy[0])+this._x)+" "+(Number(xy[1])+this._y)}TweenMax.set(this._poly,{attr:{points:newPts}})}},plyln.getInstance=function(id){return _instances[id]},plyln.getElInstance=function(el){return _instances[el.id]},Object.defineProperty(plyln,"VERSION",{get:function(){return"0.0.3"}}),"function"==typeof define&&define.amd?define(function(){return plyln}):"undefined"!=typeof module&&module.exports?module.exports=plyln:global.plyln=plyln}(mkr._constructs);